import{D as a,Q as e}from"./petite-vue.es.dbdd9865.js";import{T as t,s as c}from"./Toast.80c5dc86.js";import{c as i,g as o,s as r}from"./login.c5199486.js";let n=new t;i()&&window.location.replace("/admin/");let s=a({captchaKey:"",captchaImg:"",captcha:"",email:"",password:"",isLogin:null,checkIsLogin:()=>s.isLogin=i(),getCaptcha:()=>o(null,(a=>{if(200!==a.code)throw new Error("Failed to get captcha image! Please try refreshing the current page!");s.captchaKey=a.data.captcha.key,s.captchaImg=a.data.captcha.img}),(a=>n.title("Error!").content(a).error())),signIn:()=>c.helper(r(s.captchaKey,s.captcha,s.email,s.password),(a=>{s.checkIsLogin(),s.captchaKey="",s.captcha="",s.isLogin?(s.email="",s.password="",window.location.replace("/admin/")):(n.title("Login failed!").content(a.message).error(),s.getCaptcha())}),(a=>n.title("Login failed!").content(a).error()))});e({admin:s}).mount();
