var t=Object.defineProperty,e=(e,o,i)=>(((e,o,i)=>{o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i})(e,"symbol"!=typeof o?o+"":o,i),i),o=top.Router||(top.Router=new class{constructor(t=null,o={}){if(e(this,"iframe",null),e(this,"beforeGo",null),e(this,"router",""),e(this,"historyMode",!0),o&&"object"==typeof o&&"boolean"==typeof o.historyMode&&(this.historyMode=o.historyMode),!t){if(!(t=top.document.body.getElementsByTagName("iframe")).length)throw new Error("WARRING: ROUTER FATAL ERROR!");t=t.item(0)}this.iframe=t,this.historyMode||this.initHashChange()}initHashChange(){window.addEventListener("hashchange",(t=>{this.go(t.target.location.hash)}))}processRouterString(t){return"#"===t[0]&&(t=t.substring(1)),"/"!==t[0]&&(t="/"+t),t}go(t=null,e=0){if(null===t&&(t=this.historyMode?window.location.pathname:""===window.location.hash?"/":window.location.hash),t=this.processRouterString(t),this.router===t)return t;if(this.beforeGo&&"function"==typeof this.beforeGo){let o=this.beforeGo(t,e,this);"object"==typeof o&&null!==o&&(void 0!==o.router&&null!==o.router&&(t=o.router),void 0!==o.delay&&null!==o.delay&&(e=o.delay))}return t=this.processRouterString(t),this.router=t,e?setTimeout(this.constructor.change,e,this.iframe,t,this.historyMode):this.constructor.change(this.iframe,t,this.historyMode),t}static change(t,e,o){"/"===e?history.replaceState(null,"","/"):o?history.replaceState(null,"",e):window.location.hash=e,t.src="/pages"+("/"===e?"/index.html":e)}});export{o as R};
